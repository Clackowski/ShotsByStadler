<!DOCTYPE HTML>
<!--
	Stellar by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->

<html>
	<head>
		<title>Shots by Stadler</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div id="login-container" class="login-button" style="position: absolute; top: 10px; right: 10px;">
							<a href="index.html" class="button">Home</a>
						</div>
					</header>

				<!-- Nav -->
				<nav id="nav">
					<ul class="links">
						<h1>Login Page</h1>
					</ul>
				</nav>

				<!-- Main -->
					<div id="main">

						<!-- Content -->
							<section id="content" class="main">
								<!-- Form -->
								<form id="loginForm">
									<label type="text" id="errors" style="color: red; font-size: 18px; text-align: center;"></label>

									<label for="username" style="font-size: 16px;">Username:</label>
        							<input type="text" id="username" name="username" required>

									<br>

       								<!-- Password Input -->
        							<label for="password" style="font-size: 16px;">Password:</label>
        							<input type="password" id="password" name="password" required>

									<br>
									<br>

									<div style="text-align: center;">
       									 <!-- Submit Button -->
        								<button type="button" style="font-size: 16px;" onclick="attemptLogin(document.getElementById('username').value, document.getElementById('password').value)">Login</button>

										<br>
										<br>

										<!-- Create New Account Button -->
										<button type="button" style="font-size: 16px;" onclick="window.location.href='createAccount.html'">Create New Account</button>
									</div>
								</form>
							</section>

							<script>
								function attemptLogin(username, password) {
									fetch('userdata.json')
									  .then(response => response.json())
									  .then(data => {
										// Check if user exists
										const userExists = data.hasOwnProperty(username);
							
										// Check if that user's password is correct
										if (userExists) {
											const usersPassword = data[username].password;
											const userRole = data[username].role;

											if (usersPassword == password) {
												document.getElementById('username').value = "";
												document.getElementById('password').value = "";
												localStorage.setItem('CurrentUser', username);
												localStorage.setItem('LoginLink', "myphotos.html");
												localStorage.setItem('CurrentUserRole', userRole);
												window.location.href = "index.html";
												
											} else {
												document.getElementById('password').value = "";
												document.getElementById('errors').textContent = "Invalid Password";
											}
										} else {
											document.getElementById('username').value = "";
											document.getElementById('password').value = "";
											document.getElementById('errors').textContent = "Invalid Username";
										}
									  })
									  .catch(error => console.error('Error:', error));
								}
							</script>

					</div>

				<!-- Footer -->
					<footer id="footer">
						<section>
							<h2>Contact Me</h2>
							<dl class="alt">
								<dt>Location</dt>
								<dd>Trumbull, CT</dd>
								<dt>Phone</dt>
								<dd>(203) 343-8630</dd>
								<dt>Email</dt>
								<dd>annika.stadler5842@gmail.com</dd>
							</dl>
							<ul class="icons">
								<li><a href="#" class="icon brands fa-instagram alt"><span class="label">Instagram</span></a></li>
							</ul>
						</section>
					</footer>
			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>